<html>
  <head>
    <meta charset="utf-8" />
    <title>Promise - 3</title>
    <style></style>
  </head>
  <body></body>
  <script>
    // Promise.all和race的使用
    // const hdcms = new Promise((resolve, reject) => {
    //   setTimeout(() => {
    //     resolve("第一个异步");
    //   }, 1000);
    // });

    // const houdunren = new Promise((resolve, reject) => {
    //   setTimeout(() => {
    //     resolve("第二个异步");
    //   }, 2000);
    // });

    // 都成功一起返回
    // Promise.all([hdcms, houdunren]).then((result) => {
    //   console.log(result);
    // });
    // 返回最快成功的一个
    // Promise.race([hdcms, houdunren]).then((result) => {
    //   console.log(result);
    // });

    // -------------------------------
    // Promise队列原理
    // -------------------------------
    // let p1 = new Promise((resolve, reject) => {
    //   resolve("success1");
    //   // reject("fail1");
    // })
    //   .then(
    //     (value) => {
    //       console.log("成功" + value);
    //       return new Promise((resolve, reject) => {
    //         setTimeout(() => {
    //           reject("fail2");
    //         }, 1000);
    //       }).then(null, (r) => {
    //         console.log(r);
    //         return new Promise((resolve, reject) => {
    //           resolve("success3");
    //           // reject("fail3");
    //         });
    //       });
    //     },
    //     (reason) => {
    //       console.log(reason);
    //     }
    //   )
    //   .then(
    //     (value) => {
    //       console.log(value);
    //     },
    //     (reason) => {
    //       console.log(reason);
    //     }
    //   );

    // function queue(num) {
    //   let promise = Promise.resolve();
    //   num.map((v) => {
    //     promise = promise.then(() => {
    //       return new Promise((resolve) => {
    //         setTimeout(() => {
    //           console.log(v);
    //           resolve();
    //         }, 1000);
    //       });
    //     });
    //   });
    // }
    // queue([1, 2, 3, 4, 5]);
  </script>
</html>
